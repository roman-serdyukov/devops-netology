# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ
-   Полная (аппаратная виртуализация).
Гипервизор и есть миниОС. Осуществляет урпавление ВМ и распределение ресурсов между ними. ВМ полностью изолировнные и "не знают", что запущены на гипервизоре.
-   Парапиртуализация
Гипервизор устанавливается на ОС и работает как один из ее процессов, осуществляя управление ВМ. Происходит модификация ядра гостевой ОС, в ходе которой заменяются невиртуализируемые инструкции гипервызовами. ВМ "знают", что запущены в виртуальной среде.
-   Виртуализация на уровне ОС.
Использует ядро самой ОС.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

-   физические сервера,
-   паравиртуализация,
-   виртуализация уровня ОС.

Условия использования:

-   Высоконагруженная база данных, чувствительная к отказу.
-   Различные web-приложения.
-   Windows системы для использования бухгалтерским отделом.
-   Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ

-   Высоконагруженная база данных, чувствительная к отказу.
Физические серверы, объединенные в кластеры т.к. это обеспечит максимальный уровень производительности дисковых систем.

-   Различные web-приложения.
Виртуализация на уровне ОС. Это обеспечит скорость развертывания, удобство администрирования.

-   Windows системы для использования бухгалтерским отделом.
Паравиртуализация. Наиболее удобный способ для создания нескольких гостевых ОС Windows.

-   Системы, выполняющие высокопроизводительные расчеты на GPU.
Физические серверы. Если нужны высокопроизводительные расчеты, то для чего делить мощности? (Да и о технических решениях для GPU я не слышал)

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1.  100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2.  Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3.  Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4.  Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ
1.  VM vSPhere: 
- Есть балансировка нагрузки VMware DRS.
- Репликация даных vSphere Replication.
- Резервное копирование vSphere Data Protection Advanced.
- Единый центр управления vCenter Server.

Hyper-v обладает подобным функционалом, за исключением балансировки нагрузки ресурсами хостов.

2. KVM может дать высовую производительность как для ОС на базе Linux, так и для ОС на базе Windows, т.к. обещает производительность, близкую к нативной.

3. Для виртуализации Windows подойдет KVM, т.к. обещают производительность, близкую к нативной.

4. Для тестирования программного продукта на нескольких дистрибутивах Linux лучше использовать аппаратную виртуализацию, чтобы максимально изолировать среды. WMVare или Xen HVM.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ
Возможные проблемы и недостатки:
1.  Наличие квалифицированного персонала
2.  Разные точки администрирования
3.  Сложность миграции ВМ между средами
4.  Сложность в масштабировании
5.  Повышенные расходы на обслуживание и развитие

Минимизация:
1.  Держать квалифицированный персонал
2.  Тщательно и заранее планировать масштабирование и обслуживание
3.  Иметь избыточные мощности для экстренной миграции и масштабирования
4.  Иметь максимально совместимый парк оборудования для всех (не облачных) сред

В обычном случае я бы придерживался одной общей среды виртуализации, но все зависит всегда от конкретных задач и возможностей оргнизации. Например:
-   Серверы, обслуживающие запросы сотрудников организации (DC, BD, MAIL) на VMWare, а сайт с балансировкой нагрузки в облаке. 
-   Серверы, обслуживающие запросы сотрудников организации (DC, BD, MAIL) на Hyper-v, т.к инфраструктура построена на продуктах Microsoft. Cерверы для тестовых сред отдела разработки на KVM.
-   Полностью инфраструктура на Xen HVM, если бюджет ограничен.